import React from 'react';
import PropTypes from 'prop-types';
import Hoverable from "../../../../form/Hoverable";
import {openModal} from "../state/equipedActions";
import {connect} from "react-redux";

const Parts = ({isHovered, item}) => (
  <g>
    <path filter={ isHovered && "url(#sofGlow)" } d="M219.62 352.9h-9.65a13.28 13.28 0 0 0-1.84 6.4v.7h-55.3a66.22 66.22 0 0 1-18.2 2.5c-6.3 0-12.4-.85-18.2-2.5h-55.3v-.7c0-2.3-.78-4.47-1.85-6.4h-9.64l-5.01-5v-23.85l5.01-5.02h9.69c1.04-1.9 1.8-4.04 1.8-6.3v-.7h55.3a66.2 66.2 0 0 1 18.2-2.5c6.29 0 12.4.85 18.2 2.5h55.3v.7c0 2.26.75 4.4 1.8 6.3h9.69l5 5.02v23.84l-5 5.02m-110.96 2.88c.59 0 1.06.48 1.06 1.07l-.02.13c1.41.6 2.85 1.14 4.32 1.63h41.22c1.46-.49 2.9-1.03 4.31-1.63l-.02-.13a1.05 1.05 0 1 1 1.87-.67c1.09-.5 2.16-1.05 3.21-1.61h-59.97c1.06.56 2.13 1.1 3.21 1.6.2-.23.48-.39.81-.39m-8.06-2.88H62.4c.84 1.3 3.11 3.65 8.41 3.65h36.43a59.2 59.2 0 0 1-6.64-3.65m2.95 1.07h62.16c.61-.35 1.22-.7 1.82-1.07h-65.8c.6.36 1.2.72 1.82 1.07m65.1-1.07a59.22 59.22 0 0 1-6.64 3.65h36.53c5.3 0 7.57-2.35 8.42-3.65h-38.3m39.74 0h-.73a8.21 8.21 0 0 1-4.86 3.65h4.28c.28-1.29.73-2.51 1.3-3.65m-1.61 5.7c.03-.49.08-.97.17-1.45h-45.36c-.13.43-.52.76-1 .76-.32 0-.6-.15-.8-.38-.9.38-1.81.74-2.74 1.08h49.73m-72.15 3.28c5.45 0 10.78-.65 15.86-1.9h-31.73a66.03 66.03 0 0 0 15.87 1.9m-22.43-3.28c-.92-.34-1.84-.7-2.74-1.08-.2.23-.48.38-.8.38-.48 0-.87-.33-1-.76H62.3c.08.48.14.96.17 1.46h49.72m-50.03-2.06h4.37a8.22 8.22 0 0 1-4.85-3.65h-.83a15.83 15.83 0 0 1 1.31 3.65M46 347.32l4.21 4.21h2.71a11.34 11.34 0 0 1-5.07-4.26h-.05v-.07a16.07 16.07 0 0 1-1.8-3.75v3.87m0-6.14c.3 1.41.84 3.18 1.8 4.87v-20.17c-.17.3-.34.57-.5.9a17.89 17.89 0 0 0-1.3 3.93v10.47m4.21-20.77l-4.2 4.2v3.88c.4-1.22.98-2.52 1.8-3.75v-.07h.04a11.35 11.35 0 0 1 5.07-4.26h-2.7m110.38-4.17c-.6 0-1.07-.48-1.07-1.07l.03-.13a61.03 61.03 0 0 0-4.32-1.63h-41.22c-1.47.49-2.9 1.03-4.32 1.63l.03.13c0 .6-.48 1.07-1.06 1.07-.33 0-.62-.16-.81-.4-1.1.5-2.16 1.05-3.22 1.61h59.97a59.35 59.35 0 0 0-3.2-1.6c-.2.23-.49.39-.81.39m7.91 2.8h38.3c-.9-1.32-3.18-3.57-8.37-3.57h-36.43a59.32 59.32 0 0 1 6.5 3.56m-2.8-.98h-62.16c-.57.32-1.13.65-1.68.98h65.52l-1.68-.98m-64.97.98a59.32 59.32 0 0 1 6.5-3.56H70.71c-5.18 0-7.46 2.25-8.35 3.56h38.38m-39.83 0h.73a8.26 8.26 0 0 1 4.8-3.56h-4.27c-.28 1.25-.7 2.45-1.26 3.56m1.57-5.62c-.03.5-.09.98-.17 1.46h45.35c.13-.43.52-.76 1-.76.33 0 .6.15.8.38.9-.38 1.82-.74 2.74-1.08H62.48m72.15-3.28c-5.46 0-10.78.65-15.87 1.9h31.73a66.02 66.02 0 0 0-15.86-1.9m22.43 3.28c.92.34 1.83.7 2.74 1.08.2-.23.47-.38.8-.38.48 0 .87.33 1 .76h45.35a12.6 12.6 0 0 1-.17-1.46h-49.72m50.03 2.06h-4.37a8.26 8.26 0 0 1 4.8 3.56h.83a15.75 15.75 0 0 1-1.26-3.56m-152.26 4.94c-2.61.63-4.7 2.07-6.28 4.28v22.54a10.71 10.71 0 0 0 6.3 4.3h159.58c2.61-.63 4.7-2.07 6.27-4.28v-22.54a10.7 10.7 0 0 0-6.3-4.3H54.83m168.42 4.2l-4.2-4.2h-2.71c2.29.96 3.91 2.53 5.07 4.26h.04v.07c.82 1.23 1.4 2.53 1.8 3.75v-3.87m0 6.14a17.4 17.4 0 0 0-1.8-4.87v20.17c.17-.3.35-.57.5-.9a17.95 17.95 0 0 0 1.3-3.93v-10.47m0 12.69c-.4 1.22-.98 2.52-1.8 3.75v.07h-.04a11.34 11.34 0 0 1-5.07 4.26h2.7l4.21-4.2v-3.88" transform="matrix(.9594 0 0 .9567 6.97 -98.58)"/>
    <path fill="#fff" d="M58.6 237.37a9.48 9.48 0 0 1-4.06-2.68l-.9-.96v-21.7l.37-.46c.53-.67 1.6-1.67 2.28-2.12.8-.54 1.45-.85 2.45-1.19l.85-.28h153.06l.73.24c1.87.6 3.54 1.74 4.8 3.25l.47.56v21.67l-.59.7a10.54 10.54 0 0 1-4.54 3.05l-.74.24H59.47zM66.94 206.54c0-.04.25-.34.56-.66a8.86 8.86 0 0 1 4.5-2.34l.97-.22 18.32-.03 18.33-.03-1.6.83c-.87.46-2.24 1.21-3.04 1.68l-1.45.86h-18.3c-10.56 0-18.29-.04-18.29-.09zM66.88 202.14l.06-.62c0-.17.66-.18 23.66-.18h23.65l-1.11.44c-1.06.42-1.12.43-1.37.29a1.44 1.44 0 0 0-.61-.15c-.29 0-.43.07-.68.33l-.32.34H66.82zM65.5 206.6c0-.02.12-.32.27-.65.28-.62.6-1.52.78-2.28l.11-.4h3.71l-.97.46a7.46 7.46 0 0 0-3.05 2.49c-.22.32-.34.4-.57.4-.16 0-.28 0-.28-.03zM51.13 213.75v-1.69l2.05-2.04 2.05-2.04H57.54l-.68.36c-2.38 1.27-4.21 3.4-5.4 6.3l-.33.79zM52.34 231.4c-.4-.87-.75-1.85-1.02-2.89-.18-.72-.2-1.01-.2-5.68v-4.93l.25-.94c.25-.96.87-2.6 1.2-3.21.19-.34.19-.27.2 9.01 0 5.15-.03 9.36-.06 9.36-.02 0-.2-.33-.37-.72zM53.17 235.65l-2.04-2.05v-3.36l.23.58c1.1 2.84 2.96 5.1 5.32 6.44l.76.43h-2.22zM73.11 242.4a9 9 0 0 1-5.53-2.53l-.67-.69 18.3-.02 18.31-.02 1.32.78c.72.44 2.09 1.2 3.04 1.68l1.74.9-17.9-.01c-9.83 0-18.2-.05-18.6-.1zM66.55 242.1c-.18-.71-.4-1.35-.73-2.14a18.6 18.6 0 0 1-.32-.8 1 1 0 0 1 .32-.02c.27 0 .37.06.58.38a8.54 8.54 0 0 0 3.43 2.7l.63.28h-3.8zM66.94 244.25l-.06-.63-.06-.44h43.34l.32.33c.26.28.39.34.7.34.2 0 .47-.07.59-.15.2-.14.28-.13 1.25.25.57.22 1.05.42 1.08.44.02.02-10.58.04-23.56.04-22.94 0-23.6 0-23.6-.18zM114.88 243.94c-2.27-.83-2.6-.98-2.6-1.2-.01-.76-1.09-1.24-1.67-.74-.16.14-.3.09-1.6-.56l-1.42-.72 14.3-.02h28.55l14.24.02-1.42.71c-1.29.65-1.43.7-1.59.57-.58-.5-1.66-.05-1.66.7 0 .26-.1.31-2.67 1.26l-1.27.47h-19.95l-19.94-.01zM105.52 239.57l-.72-.43h31.27c17.2 0 31.27.01 31.27.03 0 .02-.3.22-.67.44l-.66.4-29.89-.01h-29.88zM121.54 199.86a64.97 64.97 0 0 1 29.2 0c.03.02-6.54.04-14.6.04-8.05 0-14.62-.02-14.6-.04zM109.03 204.36c1.3-.66 1.44-.71 1.6-.57.54.49 1.64.03 1.64-.69 0-.28.13-.34 2.24-1.12l1.71-.64h39.84l1.52.57c2.28.85 2.43.92 2.43 1.18 0 .73 1.1 1.2 1.65.7.15-.14.29-.1 1.6.57l1.43.72h-57.1zM104.94 206.59a5 5 0 0 1 .69-.43l.68-.4h59.66l.69.4c.37.21.68.4.68.43 0 .02-14.04.04-31.2.04s-31.2-.02-31.2-.04zM105.52 239.57l-.72-.43h31.27c17.2 0 31.27.02 31.27.04s-.3.22-.67.43l-.66.4h-29.89l-29.88-.01zM134.43 247.6a63.07 63.07 0 0 1-13.14-1.7c0-.02 6.68-.02 14.86-.02 12.75 0 14.83.01 14.6.07l-1.25.28a63.98 63.98 0 0 1-15.07 1.37zM116.23 244.45l-1.01-.36c-.52-.18-1.39-.51-1.94-.73l-1-.4-.02-.23a1 1 0 0 0-1.03-.92.81.81 0 0 0-.55.16c-.17.1-.28.15-.35.12-.06-.01-.72-.33-1.46-.7l-1.35-.69h57.24l-1.46.74-1.47.73-.16-.14c-.3-.27-.69-.3-1.08-.11a.98.98 0 0 0-.57.79l-.03.25-1.04.42-1.95.74-.92.34H136.2c-10.94.01-19.92 0-19.96-.01zM164.02 241.77c1.51-.76 2.77-1.47 4.02-2.23l.73-.45h36.71l-.16.23a9 9 0 0 1-1.56 1.5 9.74 9.74 0 0 1-3.33 1.4c-1.35.28.32.26-19.62.27l-18.23.02zM158.57 244.2l1.2-.48.48-.2.2.15c.28.2.65.24.97.12.22-.09.48-.34.56-.54l.04-.12h21.73c17.34 0 21.72.02 21.72.06a19.57 19.57 0 0 1-.14 1.25c0 .02-10.69.04-23.74.04h-23.74zM202.2 242.34a8.47 8.47 0 0 0 3.76-2.85l.26-.4h.65l-.14.28c-.36.72-.85 2.1-1.02 2.86l-.06.28h-3.87zM215.33 237.37c1.47-.76 2.7-1.8 3.7-3.15a19.7 19.7 0 0 1 .43-.58l.16-.28c.46-.72.97-1.75 1.33-2.7l.19-.49v3.51l-2.01 2.01-2.01 2h-2.41zM219.46 222.86v-9.56l.27.52c.51 1 .96 2.22 1.27 3.43l.14.58v10.08l-.17.67a16.13 16.13 0 0 1-1.3 3.47l-.21.38zM75.42 222.84v-14.86l68.72.01 68.73.02.6.2c1.12.38 2.33 1.04 3.21 1.74.48.37 1.3 1.2 1.68 1.7l.32.4v21.6l-.18.25a10.14 10.14 0 0 1-4.98 3.58l-.55.2h-68.78l-68.77.02zM220.9 214.91a18 18 0 0 0-1.18-2.4 11.07 11.07 0 0 0-4.5-4.25l-.55-.28h2.45l2.01 2.01 2.01 2v1.74l-.02 1.74zM167.61 206a46.21 46.21 0 0 0-3.68-2.04l-1.35-.69 18.13.01 18.13.02.67.1c2.01.33 3.52.98 4.74 2.03.37.32.92.92 1.03 1.12.05.08-.84.09-18.29.08h-18.34zM205.86 206.28a7.94 7.94 0 0 0-3.71-2.83l-.46-.18h3.96l.08.37a16.56 16.56 0 0 0 1.08 2.94c.02.04-.07.05-.36.05h-.38zM161.98 202.5a1.14 1.14 0 0 0-.55-.5.97.97 0 0 0-.92.09l-.27.16-.69-.28-1.2-.47-.5-.2h23.74c13.05 0 23.74.01 23.74.03a37.4 37.4 0 0 0 .14 1.25c0 .05-4.37.06-21.72.06h-21.72zM121.68 199.85c.1-.1 4.26-.87 5.86-1.08a56.2 56.2 0 0 1 8.66-.53c4.14 0 6.93.23 10.7.86 4.82.82 5.27.78-10.76.8-7.98 0-14.49-.02-14.46-.05zM122.01 199.76a65.15 65.15 0 0 1 28.56.09c.03.03-6.47.05-14.45.05-9.12-.01-14.36-.06-14.1-.14z"/>
    <foreignObject  x="50" y={208}>
      <div style={{
        height: '30px',
        lineHeight: "30px",
        width: '171px',
        border: 'none',
        fontFamily: 'Scala Sans Offc',
        fontSize: 'medium',
        textAlign: 'center' }}>
        {item && item.name}
      </div>
    </foreignObject>
  </g>
);

const EquipmentSlot = ({openModal, slotName, translate, item}) => (
  <g transform={translate}>
    <Hoverable
      x={50}
      y={198}
      width={175}
      height={50}
      onClick={() => openModal(slotName)}
    >
      <Parts item={item}/>
    </Hoverable>
  </g>
);

EquipmentSlot.propTypes = {};

const mapStateToProps = (state, ownProps) => {
  const slotValue = state.equipedReducer.equipped[ownProps.slotName];
  const equipment = Object.values(state.equipmentReducer.inventory).reduce((accumulator, value) => {
    return {...accumulator, ...value};
  }, {});

  return {
    item: equipment[slotValue]
  }
};

const mapDispatchToProps = (dispatch) => ({
  openModal: (slotName) => dispatch(openModal(slotName))
});

export default connect(mapStateToProps, mapDispatchToProps)(EquipmentSlot);
